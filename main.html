<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>QUEEN ASHI MD MINI BOT</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

<style>
/* Only Theme Colors - Pink & Black */
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif;color:#ff69b4;}
body{height:100vh;overflow:hidden;background:#000;}
#bg{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;}

.container{display:flex;justify-content:center;align-items:center;height:100vh;}
.box{width:330px;padding:25px;background:rgba(0,0,0,.85);border-radius:15px;text-align:center;border:2px solid #ff69b4;box-shadow:0 0 20px #ff69b4;position:relative;transition:transform .2s;}
.rgb-text{font-size:22px;font-weight:bold;background:linear-gradient(90deg,#ff69b4,#ff1493,#ff69b4);-webkit-background-clip:text;color:transparent;animation:grad 5s linear infinite;}
@keyframes grad{to{background-position:300px;}}
h6{margin-top:8px;}
.input-container{display:flex;margin-top:15px;}
.input-container input{width:70%;height:45px;border:1px solid #ff69b4;background:#000;color:#ff69b4;outline:none;border-radius:10px 0 0 10px;padding-left:10px;font-size:16px;}
.input-container button{width:30%;height:45px;border:1px solid #ff69b4;border-left:none;border-radius:0 10px 10px 0;background:#000;color:#ff69b4;font-weight:bold;cursor:pointer;transition:all 0.3s;}
.input-container button:hover{background:#ff69b4;color:#000;}
.result-box{min-height:40px;margin-top:15px;padding:10px;border:1px solid #ff69b4;border-radius:10px;background:rgba(255,105,180,0.1);display:flex;align-items:center;justify-content:center;word-break:break-all;font-weight:bold;}
.cooldown{font-size:12px;margin-top:6px;opacity:.7;min-height:18px;}

/* Music controls */
.music-controls{position:fixed;right:15px;bottom:15px;display:flex;flex-direction:column;align-items:flex-end;gap:10px;z-index:10;}
.music-btn{background:#000;color:#ff69b4;padding:12px 18px;border-radius:30px;font-weight:bold;cursor:pointer;box-shadow:0 0 15px #ff69b4;border:1px solid #ff69b4;transition:all 0.3s;}
.music-btn:hover{background:#ff69b4;color:#000;}
.volume-container{display:flex;align-items:center;gap:10px;background:rgba(0,0,0,0.8);padding:8px 15px;border-radius:30px;border:1px solid #ff69b4;}
.volume{width:100px;}
.volume-icon{color:#ff69b4;}

/* Responsive */
@media (max-width: 480px) {
  .box{width:300px;padding:20px;}
  .music-controls{bottom:10px;right:10px;}
  .music-btn{padding:10px 15px;font-size:14px;}
  .volume-container{padding:6px 12px;}
  .volume{width:80px;}
}
</style>
</head>

<body>

<canvas id="bg"></canvas>

<div class="container">
  <div class="box" id="box">
    <!-- Awesome Icons Section -->
    <div style="display: flex; justify-content: center; gap: 20px; margin-bottom: 15px;">
      <i class="" style="font-size: 28px; color: #ff69b4; text-shadow: 0 0 10px #ff1493;"></i>
      <i class="fa-solid fa-robot" style="font-size: 28px; color: #ff69b4; text-shadow: 0 0 10px #ff1493;"></i>
      <i class="" style="font-size: 28px; color: #ff69b4; text-shadow: 0 0 10px #ff1493;"></i>
    </div>
    
    <div class="rgb-text" id="title"></div>
    <h6><i class="fa-solid fa-code"></i> CREATED BY DEV XANZ</h6>
    <h6><i class="fa-solid fa-mobile-screen-button"></i> Enter your number with country code</h6>

    <div class="input-container">
      <input type="number" id="number" placeholder="94xxxxxxxxx">
      <button id="submit"><i class="fa-solid fa-paper-plane"></i></button>
    </div>

    <div class="result-box" id="pair"></div>
    <div class="cooldown" id="cooldown"></div>
    
    <!-- Bottom Awesome Icons -->
    <div style="display: flex; justify-content: center; gap: 25px; margin-top: 20px;">
      <i class="" style="font-size: 20px; color: #ff69b4; opacity: 0.8;"></i>
      <i class="" style="font-size: 20px; color: #ff69b4; opacity: 0.8;"></i>
      <i class="" style="font-size: 20px; color: #ff69b4; opacity: 0.8;"></i>
      <i class="" style="font-size: 20px; color: #ff69b4; opacity: 0.8;"></i>
    </div>
  </div>
</div>

<audio id="bgMusic" loop autoplay muted playsinline>
  <source src="https://files.catbox.moe/e1umjr.mpeg" type="audio/mpeg">
</audio>

<div class="music-controls">
  <div class="music-btn" onclick="toggleMusic()" id="musicBtn">
    <i class="fa-solid fa-music"></i> Play Music
  </div>
  <div class="volume-container">
    <i class="fa-solid fa-volume-high volume-icon"></i>
    <input class="volume" type="range" min="0" max="1" step="0.01" value="0.5" onchange="bgMusic.volume=this.value">
  </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.0.0-alpha.1/axios.min.js"></script>

<script>
/* Typewriter */
const text="QUEEN ASHI MD MINI BOT";
let i=0;
const title=document.getElementById("title");
(function type(){ if(i<text.length){ title.textContent+=text.charAt(i++); setTimeout(type,100);} })();

/* 3D tilt */
const box=document.getElementById("box");
box.addEventListener("mousemove",e=>{
  const x=(e.offsetX-box.clientWidth/2)/20;
  const y=(e.offsetY-box.clientHeight/2)/20;
  box.style.transform=`rotateY(${x}deg) rotateX(${-y}deg)`;
});
box.addEventListener("mouseleave",()=>box.style.transform="rotate(0)");

/* Auto country code */
const c=document.getElementById("number");
if(!c.value) c.value="94";

/* Cooldown */
let canSend=true;
const cd=document.getElementById("cooldown");
const resultBox = document.getElementById("pair");

function startCooldown(){
  let t=30; 
  canSend=false;
  cd.style.opacity = "1";
  
  const timer=setInterval(()=>{
    cd.textContent=`<i class="fa-solid fa-hourglass-half"></i> Wait ${t--}s before next request`;
    if(t<0){ 
      clearInterval(timer); 
      cd.textContent="<i class='fa-solid fa-check-circle'></i> Ready to send";
      cd.style.opacity = ".7";
      canSend=true; 
    }
  },1000);
}

const b=document.getElementById("submit");

b.addEventListener("click",async e=>{
  e.preventDefault();
  if(!canSend) return;
  
  const number = c.value.trim();
  if(number.length<11){ 
    resultBox.innerHTML="<i class='fa-solid fa-triangle-exclamation'></i> Invalid number (minimum 11 digits)"; 
    return; 
  }
  
  if(!number.startsWith("94")){
    resultBox.innerHTML="<i class='fa-solid fa-globe'></i> Please use Sri Lanka country code (94)";
    return;
  }
  
  startCooldown();
  resultBox.innerHTML="<i class='fa-solid fa-spinner fa-spin'></i> Processing...";
  
  try {
    const response = await axios(`/code?number=${number}`);
    resultBox.innerHTML=`<i class="fa-solid fa-unlock-keyhole"></i> CODE: ${response.data.code || "Unavailable"}`;
  } catch (error) {
    resultBox.innerHTML=`<i class='fa-solid fa-circle-xmark'></i> Error: ${error.message || "Request failed"}`;
    canSend = true;
    cd.textContent = "<i class='fa-solid fa-rotate-right'></i> Try again";
    cd.style.opacity = ".7";
  }
});

/* Enter key support */
c.addEventListener("keypress", function(event) {
  if (event.key === "Enter") {
    event.preventDefault();
    b.click();
  }
});

/* Sound */
let music=document.getElementById("bgMusic");
let musicBtn=document.getElementById("musicBtn");
window.addEventListener("click",()=>{
  if(music.muted){ 
    music.muted=false; 
    music.play(); 
    musicBtn.innerHTML='<i class="fa-solid fa-pause"></i> Pause Music'; 
  }
},{once:true});

function toggleMusic(){
  if(music.paused){ 
    music.play(); 
    musicBtn.innerHTML='<i class="fa-solid fa-pause"></i> Pause Music'; 
  }
  else{ 
    music.pause(); 
    musicBtn.innerHTML='<i class="fa-solid fa-music"></i> Play Music'; 
  }
}

/* Volume icon update */
document.querySelector('.volume').addEventListener('input', function(e) {
  const icon = document.querySelector('.volume-icon');
  const vol = e.target.value;
  if(vol == 0) icon.className = "fa-solid fa-volume-xmark volume-icon";
  else if(vol < 0.5) icon.className = "fa-solid fa-volume-low volume-icon";
  else icon.className = "fa-solid fa-volume-high volume-icon";
});

/* Connected evenly spread particles */
const canvas=document.getElementById("bg");
const ctx=canvas.getContext("2d");
let w,h;
function resize(){
  w=canvas.width=window.innerWidth;
  h=canvas.height=window.innerHeight;
}
window.addEventListener("resize",resize);
resize();

let particles=[];
const count=140;
for(let i=0;i<count;i++){
  particles.push({
    x:Math.random()*w,
    y:Math.random()*h,
    r:Math.random()*2+1,
    vx:(Math.random()-0.5)*0.35,
    vy:(Math.random()-0.5)*0.35
  });
}

function draw(){
  ctx.clearRect(0,0,w,h);
  for(let i=0;i<particles.length;i++){
    let p=particles[i];
    p.x+=p.vx; p.y+=p.vy;

    if(p.x<0) p.x=w;
    if(p.x>w) p.x=0;
    if(p.y<0) p.y=h;
    if(p.y>h) p.y=0;

    ctx.beginPath();
    ctx.arc(p.x,p.y,p.r,0,Math.PI*2);
    ctx.fillStyle="#ff69b4";
    ctx.fill();

    for(let j=i+1;j<particles.length;j++){
      let q=particles[j];
      let dx=p.x-q.x, dy=p.y-q.y;
      let d=Math.sqrt(dx*dx+dy*dy);
      if(d<140){
        ctx.beginPath();
        ctx.moveTo(p.x,p.y);
        ctx.lineTo(q.x,q.y);
        ctx.strokeStyle=`rgba(255,105,180,${1-d/140})`;
        ctx.stroke();
      }
    }
  }
  requestAnimationFrame(draw);
}
draw();

/* Animate icons */
const icons = document.querySelectorAll('.fa-solid');
icons.forEach(icon => {
  icon.style.transition = 'all 0.3s ease';
  icon.addEventListener('mouseenter', () => {
    icon.style.transform = 'scale(1.2)';
    icon.style.textShadow = '0 0 15px #ff1493';
  });
  icon.addEventListener('mouseleave', () => {
    icon.style.transform = 'scale(1)';
    icon.style.textShadow = '0 0 10px #ff1493';
  });
});
</script>

</body>
</html>